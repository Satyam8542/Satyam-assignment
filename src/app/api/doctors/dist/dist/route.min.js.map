{"version":3,"sources":["route.js"],"names":["_server","_interopRequireDefault","require","_db","_Doctor","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","value","step","next","e","rejected","result","done","adopt","then","fulfilled","apply","__generator","body","f","y","t","g","_","trys","ops","verb","throw","return","Symbol","iterator","this","v","op","TypeError","call","label","pop","length","n","GET","searchParams","location","specialty","doctors","_a","db_1","sent","URL","req","url","get","push","Doctor_1","find","area","$regex","RegExp","server_1","NextResponse","json","error","status","exports"],"mappings":"AAAA,aAEA,IAAAA,QAAAC,uBAAAC,QAAA,gBACAC,IAAAF,uBAAAC,QAAA,aAAAE,QAAAH,uBAAAC,QAAA,4FAKA,IAAIG,UAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAA1EJ,OAAAA,IAAaG,EAAAA,GAAQE,SAAKL,SAAdM,EAA4BC,GACxC,SAAeC,EAAOA,GAAA,IAAAC,EAAAL,EAAAM,KAAAF,IAAA,MAAAG,GAAAJ,EAAAI,IAAE,SAAYC,EAAAJ,GAAgBA,IAAQC,EAAML,EAAA,MAAmBI,IAAA,MAAAG,GAAAJ,EAAAI,IAAEL,SAAQE,EAARK,GAAAA,EAAAC,KAAAR,EAAAO,EAAAL,OAAvF,SAAeA,GAAS,OAAOA,aAAiBL,EAAIK,EAAQ,IAAIL,EAAE,SAAUG,GAAWA,EAAQE,KAARO,CAAAF,EAAAL,OAAAQ,KAAAC,EAAAL,GAA/DH,GAAAL,EAAAA,EAAAc,MAAAjB,EAAAC,GAAA,KAAAQ,WACxBS,YAA0Cb,SAASC,EAAQa,GACvD,IAA0BC,EAAAC,EAAAC,EAAAC,EAA1BC,EAAA,CAASR,MAAAA,EAAUT,KAAO,WAAA,GAAA,EAAAe,EAAA,GAAA,MAAAA,EAAA,GAAA,OAAAA,EAAA,IAAAG,KAAA,GAAAC,IAAA,IAAE,OAAIH,EAAA,CAAAd,KAAAkB,EAAA,GAAAC,MAAAD,EAAA,GAAAE,OAAAF,EAAA,IAAA,mBAAAG,SAAAP,EAAAO,OAAAC,UAAA,WAAA,OAAAC,OAAAT,EAAEf,SAAKL,EAAAA,GAAUM,OAAKF,SAApB0B,GAAA,OAA8B,SAAWC,GAAE5B,GAAAA,EAAOI,MAAP,IAAAyB,UAAA,mCAAY,KAAAX,GAAA,IAAE,GAAAJ,EAAA,EAAAC,IAAAC,EAAA,EAAAY,EAAA,GAAAb,EAAA,OAAAa,EAAA,GAAAb,EAAA,SAAAC,EAAAD,EAAA,SAAAC,EAAAc,KAAAf,GAAA,GAAAA,EAAAZ,SAAAa,EAAAA,EAAAc,KAAAf,EAAAa,EAAA,KAAArB,KAAA,OAAAS,EAC3F,OAaQD,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEf,QAb5BI,EAASJ,IAAa,KAAA,EAAA,KAAA,EAAAe,EAAAY,EAAA,MAAO/B,KAAAA,EAAmBI,OAATiB,EAAAa,QAAf,CAAA9B,MAAA2B,EAAA,GAAArB,MAAA,GAAmC,KAAU,EAAAW,EAAAa,QAAAhB,EAAAa,EAAA,GAAAA,EAAA,CAAA,GAAA,SAAQ,KAAN,EAAAA,EAAAV,EAAAE,IAAAY,MAAAd,EAAAC,KAAAa,MAAA,SAAY,QAAE,KAAAhB,EAAA,GAAAA,EAAAE,EAAAC,MAAAc,QAAAjB,EAAAA,EAAAiB,OAAA,MAAA,IAAAL,EAAA,IAAA,IAAAA,EAAA,IAAA,CAAAV,EAAA,EAAA,SAqBlF,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEa,MAAQH,EAAG,GAAI,MApB5EtB,GAAQ,IAAtBsB,EAAsB,IAAAV,EAAAa,MAAAf,EAAA,GAAA,CAAAE,EAAAa,MAAAf,EAAA,GAAAA,EAAAY,EAAA,MAAgB7B,GAAAA,GAAQO,EAAAA,MAAOL,EAA7B,GAAsCO,CAAAA,EAAKuB,MAAQ9B,EAAAA,GAAbiB,EAAoBT,IAAKC,KAAAA,GAAzB,MAAgDM,EAAA,IAAAE,EAAAE,IAAAY,MAwBlGd,EAAEC,KAAKa,MAAO,SA3B9BJ,EAAAf,EAAAiB,KAAApC,EAAAwB,GAFJ,MAAAd,GAAAwB,EAAA,CAAA,EAAAxB,GAAAW,EAAA,EAGiG,QAHjGD,EAAAE,EAAA,EAiCQ,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE3B,MAAO2B,EAAG,GAAKA,EAAG,QAAK,EAAQrB,MAAM,GA9BxCL,CAAA,CAAAgC,EAAAP,OAO2B,SAAAQ,IAAOnB,GAAO,OAAvEvB,UAAAiC,UAAA,OAAA,EAAA,WAA6E,IAA7EU,EAAAC,EAAAC,EAAAC,EAAsF,OAAE3B,YAAAc,KAAA,SAAAc,GAAhG,OAAAA,EAAAT,OAAA,KAAA,EAAA,MAAA,CAAA,EAAAU,IAAAA,QAAA,WAAA,KAAA,EAAAD,EAAAE,OAAAN,EAAA,IAAAO,IAAAC,EAAAC,KAAAT,aACWC,EAAAD,EAAAU,IAAA,aAAA,GAAAR,EAAAF,EAAAU,IAAA,cAAA,GAAAN,EAAAT,MAAA,EAA6CV,KAAI,EAA0E,OAAnEmB,EAAkBrB,KAAA4B,KAAlB,CAAA,EAAA,EAAA,CAAmCvB,IAAgC,CAAA,EAAAwB,QAAAA,QAAA,QAAAC,KAAA,CAAtIC,KAAA,CAAAC,OAAA,IAAAC,OAAAf,EAAA,MA4CwBC,UAAW,CAAEa,OAAQ,IAAIC,OAAOd,EAAW,SA3CzC,KAAUX,EAAjB,OAAkCY,EAAZC,EAAAE,OAAtB,CAAA,EAAAW,QAAAA,QAAAC,aAAAC,KAAAhB,IAA+C,KAAA,EAChD,OAgDMC,EAAGE,OAhDT,CAAA,EAAAW,QAAAA,QAAAC,aAAAC,KAAA,CAAAC,MAAA,2BAAA,CAAAC,OAAA,OACP,KAAU5B,EAAAA,MAAU,CAAA,QAJrBE,QAAAA,YAAF,EAAYW,QAAIP,SAAE,EAOlBuB,QAAAvB,IAAKA","file":"route.min.js","sourcesContent":["\"use strict\";\n\nimport server_1 from \"next/server\";\nimport db_1 from \"@/lib/db\";\nimport Doctor_1 from \"@/models/Doctor\";\n\n\n\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.GET = void 0;\n\nfunction GET(req) {\n    return __awaiter(this, void 0, void 0, function () {\n        var searchParams, location, specialty, doctors, err_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, db_1[\"default\"]()];\n                case 1:\n                    _a.sent();\n                    searchParams = new URL(req.url).searchParams;\n                    location = searchParams.get('location') || '';\n                    specialty = searchParams.get('specialty') || '';\n                    _a.label = 2;\n                case 2:\n                    _a.trys.push([2, 4, , 5]);\n                    return [4 /*yield*/, Doctor_1[\"default\"].find({\n                            area: { $regex: new RegExp(location, 'i') },\n                            specialty: { $regex: new RegExp(specialty, 'i') }\n                        })];\n                case 3:\n                    doctors = _a.sent();\n                    return [2 /*return*/, server_1.NextResponse.json(doctors)];\n                case 4:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, server_1.NextResponse.json({ error: 'Failed to fetch doctors' }, { status: 500 })];\n                case 5: return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.GET = GET;\n"]}